# 문자열 클래스

## 정리

| 분류 | String | StringBuffer | StringBuilder |
| --- | --- | --- | --- |
| 변경 | Immutable(불변) | Mutable(가변) | Mutable(가변) |
| 동기화 |  | Synchronized 처리됨 (Thread-safe) | Synchronized 처리 안됨 |

## String

**특징**

- new 연산을 통해 생성된 인스턴스의 메모리 공간은 변하지 않는다. (불변, Immutable)
    - String 클래스의 인스턴스는 한 번 생성되면 그 내용을 변경할 수 없다. 문자열을 수정하려면 새로운 String 객체를 생성해야 한다.
- 가비지 컬렉터로 제거되어야 한다.
    - 불변 객체인 String 인스턴스는 더 이상 참조되지 않을 때 가비지 컬렉터에 의해 메모리에서 제거된다.
    - 가비지 컬렉터(Garbage Collector) : 더 이상 사용되지 않는 객체를 자동으로 찾아 메모리에서 제거하는 역할을 한다.
- 문자열 연산시 새로 객체를 만드는 오버헤드 발생한다.
    - String 객체는 불변이기 때문에 문자열 연산(concat, substring)등을 할때마다 새로운String 객체가 생성된다.
    - 이로 인해 메모리 사용량이 증가하고, 성능 저하가 발생할 수 있다.
- 객체가 불변하므로, 멀티 스레드에서 동기화를 신경쓸 필요가 없다. (조회 연산에 매우 큰 장점)
    - String 객체가 불변이기 때문에, 멀티 스레드 환경에서 여러 스레드가 동시에 String 객체를 사용해도 안전하다.
    - 각 스레드는 동일한 String 객체를 참조하더라도, 그 내용이 변경되지 않기 대문에 동기화 문제가 발생하지 않는다.
    - 이는 String 객체의 조회 연산(ex: 문자열 비교) 성능을 크게 향상시킨다.

<aside>
✏️ ** 여기서 잠시…

**스레드란?** 

- 프로세스 내에서 실행되는 작은 단위의 실행 흐름을 말한다.
    - 하나의 프로세스 안에는 여러 개의 스레드가 존재할 수 있으며, 이 스레드들이 병렬적으로 실행되는 것을 멀티스레드라고 한다.
- 멀티 스레드 환경에서는 여러 스레드가 동시에 데이터에 접근하고 수정할 수 있기 때문에 데이터 일관성이 깨지는 문제가 발생할 수 있다. 이를 해결하기 위해 동기화(Synchronization) 기능을 사용한다.
- 그런데 String 객체는 불변하기 때문에 이런 동기화 문제가 발생하지 않는다. 각 스레드가 동일한 String 객체를 참조해도 그 내용이 변경되지 않기 때문이다.
- 이는 String 객체의 조회 연산에 큰 장점이 된다. 동기화를 고려할 필요가 없기 때문에 연산 성능이 크게 향상되는 것이다.
- 즉, 멀티스레드 환경에서 String 객체를 사용하면 동기화문제를 신경쓰지 않아도 되므로, 문자열 조회 작업을 빠르게 처리할 수 있다. 이것이 String 클래스가 멀티스레드 환경에 적합한 이유이다.
</aside>

**결론 및 요약**

- String 클래스 : 문자열 연산이 더 적고, 조회가 많은 멀티스레드 환경에서 좋다.
    - String 클래스는 불변 객체이므로, 문자열 연산이 많은 경우에는 오버헤드가 발생할 수 있다.
    - 하지만 멀티스레드 환경에서 동기화를 고려하지 않아도 되므로, 문자열 조회 연산에 매우 효과적이다.
    - 따라서 문자열 연산보다는 문자열 조회가 많은 멀티스레드 애플리케이션에서 String 클래스가 적합하다.

## StringBuffer, StringBuilder

- 공통점
    - new 연산으로 클래스를 한번만 만든다. (가변, Mutable)
    - 문자열 연산시 새로 객체를 만들지 않고 크기를 변경시킨다.
    - StringBuffer와 StringBuilder 클래스의 메소드가 동일하다.
- 차이점
    - StringBuffer는 Thread-Safe하다.
        - StringBuffer는 스레드 안전(Thread-Safe)하게 설계되어 있다. 즉, 멀티스레드 환경에서도 안전하게 문자열 연산을 수행할 수 있다. 이를 위해 StringBuffer의 메소드들은 동기화처리가 되어있다.
    - StringBuilder는 Thread-safe하지 않다. (불가능)
        - StringBuilder는 스레드 안전(Thread-Safe)하지 않다. 따라서 단일 스레드 환경이나 스레드 동기화를 직접 처리하는 경우에 사용하는 것이 좋다.

**StringBuffer 클래스 : 문자열 연산이 많은 멀티 스레드 환경**

**StringBuilder 클래스 : 문자열 연산이 많은 싱글 스레드 또는 스레드 신경 안쓰는 환경**

**동기화 : 여러 스레드가 동일한 데이터를 안전하게 접근할 수 있도록 하는 것.

**동기화의 주요 목적**

- 데이터의 일관성 유지한 스레드가 데이터를 변경할 때 다른 스레드가 그 변경 내용을 안전하게 확인할 수 있도록 한다.
- 공유 자원에 대한 독점적 접근 보장한 번에 하나의 스레드만 공유 자원(데이터)에 접근할 수 있도록 한다.

---
문제) 빈칸에 알맞은 말을 넣으세요.  
1. String 클래스는 (불변/가변) 객체이며, (&ensp;)로 제거되어야 한다. 문자열 연산 시 새로 객체를 만들기 때문에 (&ensp;)문제가 발생한다.   
2. StringBuilder는 (불변/가변) 객체이며, StringBuffer는 (&ensp;)하게 설계되었고, StringBuilder는 (&ensp;)하게 설계되어 있다.