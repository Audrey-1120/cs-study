# ì»´í¬ì§€ì…˜

ê¸°ì¡´ í´ë˜ìŠ¤ê°€ ìƒˆë¡œìš´ í´ë˜ìŠ¤ì˜ êµ¬ì„± ìš”ì†Œê°€ ë˜ëŠ” ê²ƒì´ë‹¤.

### ìƒì†ì´ë€?

- í•˜ìœ„ í´ë˜ìŠ¤ê°€ ìƒìœ„ í´ë˜ìŠ¤ì˜ íŠ¹ì„±ì„ ì¬ì •ì˜ í•œê²ƒì„ ë§í•œë‹¤.
- ìë°”ì—ì„œ ë§ì´ ì“°ì´ëŠ” ê°œë…ì´ì í™œìš©ë„ê°€ ë†’ì§€ë§Œ ë‹¨ì ë„ ìˆë‹¤.

**êµ¬í˜„ ìƒì†(í´ë˜ìŠ¤â†’í´ë˜ìŠ¤)ì˜ ë‹¨ì **

- ìº¡ìŠí™”ë¥¼ ìœ„ë°˜í•œë‹¤.
    - ìº¡ìŠí™”ë€, í´ë˜ìŠ¤ ë‚´ì˜ ë°ì´í„°ë“¤ì„ ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•˜ì§€ ëª»í•˜ê²Œ ë§‰ëŠ” ê²ƒì´ë‹¤.
- ì„¤ê³„ê°€ ìœ ì—°í•˜ì§€ ëª»í•˜ë‹¤.
    - ìì‹ í´ë˜ìŠ¤ëŠ” ë¶€ëª¨ í´ë˜ìŠ¤ì˜ êµ¬ì²´ì ì¸ êµ¬í˜„ì— ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ê²°í•©ë„ê°€ ê°•í•´ì§€ë©´ ì½”ë“œì˜ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì›Œì§„ë‹¤.
    - ë˜í•œ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ êµ¬í˜„ì´ ìì‹ í´ë˜ìŠ¤ì— ê³ ì •ë˜ê¸° ë•Œë¬¸ì— ì¬ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì½”ë“œì˜ ë²”ìœ„ê°€ ì œí•œë  ìˆ˜ ìˆë‹¤.
- ë‹¤ì¤‘ìƒì†ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.

 

### ìƒì† ì˜ˆì‹œ

```java
public class CustomHashSet<E> extends HashSet {
    private int count = 0;

    public CustomHashSet(){}

    public CustomHashSet(int initCap, float loadFactor){
        super(initCap,loadFactor);
    }

    @Override
    public boolean add(Object o) {
        count++;
        return super.add(o);
    }

    @Override
    public boolean addAll(Collection c) {
        count += c.size();
        return super.addAll(c);
    }

    public int getCount() {
        return count;
    }

}
```

- ìœ„ì˜ ì½”ë“œëŠ” HashSetì— ìš”ì†Œë¥¼ ëª‡ë²ˆ ì‚½ì…í–ˆëŠ”ì§€ë¥¼count ë³€ìˆ˜ë¡œ ì²´í¬í•´ì„œ ì¶œë ¥í•œë‹¤.
    - addì™€ addAll ë©”ì†Œë“œ í˜¸ì¶œ ì‹œ, count ë³€ìˆ˜ì— í•´ë‹¹ íšŸìˆ˜ë¥¼ ë”í•´ì£¼ë©´ì„œ getCount()ë¡œ í˜¸ì¶œ ìˆ˜ë¥¼ ì•Œì•„ë‚¼ ìˆ˜ ìˆë‹¤.
    - í•˜ì§€ë§Œ, ì‹¤ì œë¡œ ì‚¬ìš©í•´ë³´ë©´ ì›í•˜ëŠ” ê°’ì„ ì–»ì§€ ëª»í•œë‹¤.

 

```java
public class Main {
    public static void main(String[] args) {
        CustomHashSet<String> customHashSet = new CustomHashSet<>();
        List<String> test = Arrays.asList("a","b","c");
        customHashSet.addAll(test);

        System.out.println(customHashSet.getCount()); // 6
    }
}
```

- a, b, cì˜ 3ê°€ì§€ ìš”ì†Œë§Œ ë°°ì—´ì— ë‹´ì•„ì„œ ì „ë‹¬í–ˆìœ¼ë‚˜ ì‹¤ì œ getCount ë©”ì†Œë“œì—ì„œëŠ” 6ì´ ì¶œë ¥ëœë‹¤.
    - ì´ëŠ” CustomHashSetì—ì„œ ìƒì†ì„ ë°›ê³  ìˆëŠ” HashSetì˜ ë¶€ëª¨ í´ë˜ìŠ¤ì¸ AbstractCollectionì˜ addAll ë©”ì†Œë“œì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```java
// AbstractCollectionì˜ addAll ë©”ì„œë“œ
public boolean addAll(Collection<? extends E> c) {
    boolean modified = false;
    for (E e : c)
        if (add(e))
            modified = true;
    return modified;
}
```

- ìœ„ ì½”ë“œëŠ” HashSetì˜ ë¶€ëª¨ í´ë˜ìŠ¤ì¸ AbstractCollectionì˜ addAll ë©”ì†Œë“œì´ë‹¤.
    - add(e)ê°€ ì‚¬ìš©ë˜ê³  ìˆë‹¤. â†’ allAll()ë©”ì†Œë“œë¥¼ ì‹¤í–‰í–ˆëŠ”ë° add()ë„ ì‹¤í–‰ë˜ì—ˆìœ¼ë¯€ë¡œ ê²°êµ­ ë‘ ë©”ì†Œë“œê°€ ëª¨ë‘ ì‹¤í–‰ë˜ì–´ ê²°ê³¼ê°’ì´ 6ì´ ë‚˜ì˜¨ ê²ƒì´ë‹¤.

ë”°ë¼ì„œ ìœ„ì˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ë‘ ë©”ì†Œë“œ ì¤‘ í•˜ë‚˜ì˜ countë¥¼ ì¦ê°€í•˜ëŠ” ê³³ì„ ì§€ì›Œì•¼ í•œë‹¤.

- ê·¸ëŸ¬ë‚˜ ì´ëŸ° ìƒí™©ì—ì„œëŠ” ì½”ë“œì˜ ë…¼ë¦¬ê°€ ê¹¨ì§ˆ ë¿ë§Œ ì•„ë‹ˆë¼ ë‚˜ì¤‘ì— HashSet í´ë˜ìŠ¤ì— ë³€ê²½ì´ ìƒê¸°ê¸°ë¼ë„ í•œë‹¤ë©´ í° ì˜¤ë¥˜ë¥¼ ë²”í•  ìˆ˜ ìˆë‹¤.
- ê²°ë¡  ì ìœ¼ë¡œ ìœ„ì™€ê°™ì´ ìƒì†ì„ ì‚¬ìš©í•œë‹¤ë©´ ìœ ì—°í•˜ì§€ ëª»í•˜ê³  ìº¡ìŠí™”ì— ìœ„ë°°ë  ìˆ˜ ìˆë‹¤ëŠ” ë¬¸ì œì ì´ ìƒê¸´ë‹¤.

### ì»´í¬ì§€ì…˜

ì»´í¬ì§€ì…˜ì€ ìƒì†ì²˜ëŸ¼ ê¸°ì¡´ì˜ í´ë˜ìŠ¤ë¥¼ í™•ì¥(extend)í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ **ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ private í•„ë“œë¡œ ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°**í•˜ëŠ” ë°©ì‹ì´ë‹¤.

â†’ ê·¸ë˜ì„œ forwardingì´ë¼ê³ ë„ ë¶€ë¥¸ë‹¤.

- ìƒˆë¡œìš´ í´ë˜ìŠ¤ì´ê¸° ë•Œë¬¸ì—, ì´ê³³ì—ì„œ ì–´ë– í•œ ìƒì„± ì‘ì—…ì´ ì¼ì–´ë‚˜ë”ë¼ë„ ê¸°ì¡´ì˜ í´ë˜ìŠ¤ëŠ” ì „í˜€ ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì´ í•µì‹¬ì´ë‹¤.

### ìœ„ì˜ ìƒì† ì˜ˆì‹œë¥¼ ì»´í¬ì§€ì…˜ í˜•ì‹ìœ¼ë¡œ ë³€ê²½í•´ë³´ì.

1. ForwardingSet í´ë˜ìŠ¤

```java
public class ForwardingSet<E> implements Set {

    private final Set<E> set;

    public ForwardingSet(Set<E> set){
        this.set=set;
    }

    @Override
    public int size() {
        return set.size();
    }

    @Override
    public boolean isEmpty() {
        return set.isEmpty();
    }

    @Override
    public boolean contains(Object o) {
        return set.contains(o);
    }

    @Override
    public Iterator iterator() {
        return set.iterator();
    }

    @Override
    public Object[] toArray() {
        return set.toArray();
    }

    @Override
    public boolean add(Object o) {
        return set.add((E) o);
    }

    @Override
    public boolean remove(Object o) {
        return set.remove(o);
    }

    @Override
    public boolean addAll(Collection c) {
        return set.addAll(c);
    }

    @Override
    public void clear() {
        set.clear();
    }

    @Override
    public boolean removeAll(Collection c) {
        return set.removeAll(c);
    }

    @Override
    public boolean retainAll(Collection c) {
        return set.retainAll(c);
    }

    @Override
    public boolean containsAll(Collection c) {
        return set.containsAll(c);
    }

    @Override
    public Object[] toArray(Object[] a) {
        return set.toArray();
    }
}
```

- Set ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ì´ë©°, ì‹¤ì œ Set ê°ì²´ë¥¼ ê°ì‹¸ì„œ ê·¸ ê¸°ëŠ¥ì„ ìœ„ì„í•œë‹¤.
- ë‚´ë¶€ì— Set<E> íƒ€ì…ì˜ set ë³€ìˆ˜ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, ìƒì„±ìì—ì„œ ì´ setì„ ì´ˆê¸°í™”í•œë‹¤.

```java
public class CustomHashSet<E> extends ForwardingSet {
    private int count = 0;

    public CustomHashSet(Set<E> set){
        super(set);
    }

    @Override
    public boolean add(Object o) {
        count++;
        return super.add(o);
    }

    @Override
    public boolean addAll(Collection c) {
        count += c.size();
        return super.addAll(c);
    }

    public int getCount() {
        return count;
    }

}
```

- CustomHashSetì€ Set ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„(implements)í•œ ForwardingSetì„ ìƒì†í•œë‹¤.
- ì´ë¡œì¨ HashSetì€ ë¶€ëª¨ í´ë˜ìŠ¤ì— ì˜í–¥ì„ ë°›ì§€ ì•Šê³  ì˜¤ë²„ë¼ì´ë”©ì„ í†µí•´ ì›í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.

**ìœ„ì˜ ìƒì† ì˜ˆì‹œì—ì„œëŠ” HashSetì„ ìƒì†ë°›ì§€ë§Œ ì™œ ForwardingSet í´ë˜ìŠ¤ëŠ” Setì„ êµ¬í˜„í• ê¹Œ?**

1. CustomHashSet(ìƒì† ì˜ˆì‹œ)
    - HashSetì„ ì§ì ‘ ìƒì†(extend) ë°›ëŠ”ë‹¤.
    - HashSetì˜ ê¸°ëŠ¥ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ê·¸ ê¸°ëŠ¥ì— ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„í•œë‹¤.(ì—¬ê¸°ì„œëŠ” ì¶”ê°€ count)
    - CustomHashSetì€ HashSetì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
        - ì¦‰ HashSetì´ ì œê³µí•˜ëŠ” ë©”ì†Œë“œì™€ ì†ì„±ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
        - addì™€ addAll ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œí•˜ì—¬ countë¥¼ ì¦ê°€ì‹œí‚¤ëŠ” ë¡œì§ì„ ì¶”ê°€í•œê²ƒ.
2. ForwardingSet(ì»´í¬ì§€ì…˜ ì˜ˆì‹œ)
    - Set ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„(implement)í•œë‹¤.
    - íŠ¹ì •í•œ Set êµ¬í˜„ì²´(HashSet, TreeSet)ì„ ê°ì‹¸ì„œ ê·¸ ê¸°ëŠ¥ì„ ìœ„ì„í•˜ëŠ” ì—­í• ì„ í•œë‹¤.
    - ForwardingSetì€ ë‚´ë¶€ì— ì‹¤ì œ Set ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©° ì´ ê°ì²´ì˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ê¸°ëŠ¥ì„ ìœ„ì„í•œë‹¤. ì´ë¥¼ í†µí•´ ë‹¤ì–‘í•œ Set êµ¬í˜„ì²´ë¥¼ ê°ìŒ€ ìˆ˜ ìˆë‹¤.
    - ì´ë¥¼ í†µí•´ ForwardingSetì„ ìƒì†ë°›ëŠ” í´ë˜ìŠ¤ëŠ” íŠ¹ì • Set êµ¬í˜„ì²´ì— ëŒ€í•œ ì˜ì¡´ì„±ì´ ì¤„ì–´ë“ ë‹¤. êµ¬ì¡°ë„ ë” ìœ ì—°í•´ì§„ë‹¤.

ìœ„ì™€ ê°™ì´ ì–´ë– í•œ í´ë˜ìŠ¤ë¥¼ Wrapper í´ë˜ìŠ¤ë¡œ ê°ì‹¸ì„œ ê¸°ëŠ¥ì„ ë§ì”Œìš´ë‹¤ëŠ” ì˜ë¯¸ì˜ ì‘ì—…ì„ ë°ì½”ë ˆì´í„° íŒ¨í„´ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

ì´ë•Œ, ìƒì†ì„ ì“°ì§€ ë§ë¼ëŠ” ì´ì•¼ê¸°ëŠ” ì•„ë‹ˆë‹¤. 

- ìƒì†ì„ ì‚¬ìš©í•˜ëŠ” ìƒí™©ì€ LSP ì›ì¹™ì— ë”°ë¼ IS-A ê´€ê³„ê°€ ë°˜ë“œì‹œ ì„±ë¦½í• ë•Œë§Œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
- ê·¸ëŸ¬ë‚˜ í˜„ì‹¤ì ìœ¼ë¡œ ì¶”í›„ì˜ ë³€í™”ê°€ ì´ë£¨ì–´ì§ˆ ìˆ˜ ìˆëŠ” ë°©í–¥ì„±ì„ ê³ ë ¤í•´ë´¤ì„ ë•Œ ì´ë ‡ê²Œ ëª…í™•í•œ IS-A ê´€ê³„ë¥¼ ì„±ë¦½í•œë‹¤ê³  ë³´ì¥í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ê°€ ëŒ€ë¶€ë¶„ì´ë‹¤.

**LSP ì›ì¹™ì— ë”°ë¼ IS-A ê´€ê³„ê°€ ì„±ë¦½í•˜ëŠ” ê²½ìš°**

1. ëª…í™•í•œ IS-A ê´€ê³„
    - ìƒì†ì„ ì‚¬ìš©í•  ë•ŒëŠ” ë¶€ëª¨ í´ë˜ìŠ¤ì™€ ìì‹ í´ë˜ìŠ¤ ê°„ì˜ ê´€ê³„ê°€ ëª…í™•í•˜ê²Œ IS-A ê´€ê³„ì—¬ì•¼ í•œë‹¤.
    - ì¦‰, ìì‹ í´ë˜ìŠ¤ê°€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ëª¨ë“  ì†ì„±ê³¼ ë©”ì„œë“œë¥¼ ì¼ê´€ë˜ê²Œ êµ¬í˜„í•´ì•¼ í•˜ë©°, ë¶€ëª¨ í´ë˜ìŠ¤ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
    - ex) `Dog`ëŠ”Â `Animal`ì˜ í•œ ì¢…ë¥˜ì´ë¯€ë¡œÂ `Animal`ì„ ìƒì†ë°›ëŠ” ê²ƒì´ ë§ë‹¤.

1. LSP ì›ì¹™ ì¤€ìˆ˜
- LSP ì›ì¹™ì— ë”°ë¼ ìì‹ í´ë˜ìŠ¤ëŠ” ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ì„ ê·¸ëŒ€ë¡œ ìœ ì§€í•´ì•¼ í•˜ë©°, ë¶€ëª¨ í´ë˜ìŠ¤ê°€ ê¸°ëŒ€í•˜ëŠ” ë™ì‘ì„ ë³€ê²½í•´ì„œëŠ” ì•ˆ ëœë‹¤.
- ë§Œì•½ ì´ëŸ¬í•œ ê´€ê³„ê°€ ëª…í™•í•˜ì§€ ì•Šê±°ë‚˜ ë³€í™”í•  ê°€ëŠ¥ì„±ì´ ìˆë‹¤ë©´, ìƒì†ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì í•©í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.

****ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ ì›ì¹™**

- ì„œë¸Œíƒ€ì…(subtype)ì€ ê·¸ ë¶€ëª¨ íƒ€ì…(parent type)ìœ¼ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤ëŠ” ê²ƒ

ë¬¸ì œ) ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì„ ë„£ì–´ë³´ì„¸ìš”

IS-Aê´€ê³„ê°€ ëª…í™•í•˜ê²Œ ì„±ë¦½í•˜ëŠ” ê²½ìš°ì—ëŠ” (1)ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ê·¸ëŸ¬ë‚˜ ì‹¤ì œë¡œëŠ” ë³€í™”ê°€ ì¼ì–´ë‚  ê°€ëŠ¥ì„±ì´ í¬ê¸° ë•Œë¬¸ì— ë§ì€ ê²½ìš°ì—ëŠ” (2)ì„ í†µí•´ ë” ìœ ì—°í•˜ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ìš´ ì„¤ê³„ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

---

**ì°¸ê³ ìë£Œ**

[ìƒì†ë³´ë‹¤ëŠ” ì»´í¬ì§€ì…˜ì„ ì‚¬ìš©í•˜ì](https://dev-cool.tistory.com/22)

[[Java] ì»´í¬ì§€ì…˜(Composition) | ğŸ‘¨ğŸ»â€ğŸ’» Tech Interview](https://gyoogle.dev/blog/computer-language/Java/Composition.html)