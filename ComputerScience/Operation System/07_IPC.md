# IPC (Inter Process Communication)

> 프로세스 간 소통 방법

- 프로세스는 독립적으로 실행되지만, 협력이 필요할 때 프로세스 간 통신을 해야하는 경우 이를 가능하게 해주는 것

<br>

### IPC 종류

![](https://velog.velcdn.com/images/coastby/post/e21d81dc-65c2-4e1d-b5cf-0593511c1d0a/image.png)

#### 1. 익명 PIPE

- 파이프는 두 개의 프로세스를 연결하는데 하나의 프로세스는 데이터를 쓰기만 하고, 다른 하나는 데이터를 읽기만 할 수 있다.

- 한쪽 방향으로만 통신이 가능한 **반이중 통신**이라고 부른다.

- 만약 양쪽으로 모두 송신/수신하고 싶다면 2개의 파이프를 만들어야 한다.

- 통신할 프로세스를 명확히 알 수 있는 경우에 사용한다.

| 장점 | 단점 |
| --- | --- |
| 매우 간단하게 사용할 수 있다. | 전이중 통신을 위해 2개를 만들어야 할 때는 구현이 복잡해진다. |
| (단순한 데이터 흐름을 가질 땐 파이프를 사용하는 것이 효율적) |  |

#### 2. Named PIPE (FIFO)

- 전혀 모르는 상태의 프로세스들 사이 통신에 사용한다.

- 즉, 익명 파이프의 확장된 상태로 **부모 프로세스와 무관한 다른 프로세스**도 **통신이 가능**한 것.

- 하지만 데이터 읽기, 쓰기를 동시에 할 수 없다.  
    - 따라서 전이중 통신을 위해서 2개의 파이프를 만들어야 가능하다.

#### 3. Message Queue

- 입출력 방식은 Named PIPE와 동일하다.

- 파이프처럼 데이터의 흐름이 아니라 **메모리 공간**이다.

- 사용할 데이터에 번호를 붙이면서 여러 프로세스가 동시에 데이터를 쉽게 다룰 수 있다.

#### 4. 공유 메모리

- 데이터 자체를 공유하도록 지원하는 설비 (PIPE, Message Queue : 통신을 이용한 설비)

- 프로세스 간 메모리 영역을 공유해서 사용할 수 있도록 허용해준다.

- 프로세스가 공유 메모리 할당을 커널에 요청하면, 커널은 해당 프로세스에 메모리 공간을 할당해주고, 이후 모든 프로세스는 해당 메모리 영역에 접근할 수 있게 된다.

- 중계자 없이 **곧바로 메모리에 접근할 수 있어서 IPC 중에서 가장 빠르게 작동한다.**

#### 5. 메모리 맵

- 공유 메모리처럼 메모리를 공유해준다.

- 열린 파일을 메모리에 맵핑시켜서 공유하는 방식 (공유 매개체가 파일 + 메모리)

- 주로 파일로 대용량 데이터를 공유해야 할 때 사용한다.

#### 6. 소켓

- 네트워크 소켓 통신을 통해 데이터를 공유한다.

- 클라이언트와 서버가 소켓을 통해서 통신하는 구조

- 원격에서 프로세스 간 데이터를 공유할 때 사용한다.

- 서버(bind, listen, accept), 클라이언트(connect)

<br>

> 이러한 IPC 통신에서 프로세스 간 데이터를 동기화하고 보호하기 위해 세마포어와 뮤텍스를 사용한다. (공유된 자원에 한 번에 하나의 프로세스만 접근시킬 때)

<br>

#### 문제
```
익명 PIPE / Named PIPE / Message Queue / 공유 메모리 / 메모리 맵 / 소켓
```
1) 데이터 흐름인 것은?
2) 메모리 공간인 것은?
3) 메모리 영역을 공유하는 것은?

<br>

##### [참고]
[IPC, 프로세스 간 통신](<https://velog.io/@coastby/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-IPC-Inter-Process-Communication-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EA%B0%84-%ED%86%B5%EC%8B%A0>)
