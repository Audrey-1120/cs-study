# Redis

- 메모리(RAM)에 데이터를 저장하는 저장소이다. (그래서 아래 장단점이 존재)  
    - 장점 : 디스크 스캐닝이 필요 없어 처리 속도가 빠르다.  
    - 단점 : 저장 공간에 제약이 있어서 보조 데이터 저장소로 사용한다.  
    -> 이를 극복하기 위해 레디스 클러스터 기능을 제공하여 저장 공간을 확장할 수 있다.

- 메모리(RAM)은 휘발성이라 이를 막기 위한 백업 과정이 있다.
    - RDB (Redis Database)  
    메모리에 있는 데이터 전체에서 스냅샷을 작성하고, 이를 디스크로 저장하는 방식
        - snapshot : 특정 지점을 설정하고 디스크에 백업
        - 특정 시간마다 여러 개의 스냅샷을 생성하고, 데이터를 복원해야 한다면 스냅샷 파일을 그대로 로딩만 하면 된다.
        - 하지만 스냅샷 이후 변경된 데이터는 복구할 수 없다. -> 데이터 유실(loss)

    - AOF (Append Only File)  
    데이터가 변경되는 이벤트가 발생하면 이를 모두 로그에 저장하고 서버가 셧다운되면 재실행해서 다시 만들어 놓는 것
        - 데이터를 생성, 수정, 삭제하는 이벤트를 초 단위로 취합 및 로그 파일에 작성
        - 모든 데이터의 변경 기록들을 보관하고 있으므로 최신 데이터 정보를 백업 가능
        - RDB 방식에 비해 데이터 유실량이 적다. (초 단위 데이터는 유실 가능)
        - 하지만 RDB 방식보다 로딩 속도가 느리고 war 파일 크기가 크다.

    - 정리하자면
        - RDB : 일부 데이터 손실에 영향을 받지 않는 경우(캐시로만 사용할 때)
        - AOF : 장애 상황 직전까지의 모든 데이터가 보장되어야 할 경우
        - RDB + AOF : 강력한 내구성이 필요한 경우  
        -> 레디스는 일반적으로 동시에 사용하여 데이터를 백업한다.  
        (예시 : RDB 스냅샷을 생성하고 이후에 변경되는 데이터는 AOF로 백업)

- 저장된 데이터를 영구적으로 디스크에 저장할 수 있는 백업 기능을 제공하므로 애플리케이션의 주 저장소로도 사용할 수 있다.

<br>

- key-value 데이터 구조에 기반한 다양한 형태의 자료 구조를 제공한다.  
따라서 레디스는 비정형 데이터를 저장하는 비관계형 데이터베이스 관리 시스템이다.

    - value 5가지  
        1) String (text, binary data) - 512MB까지 저장이 가능함
        2) set (String 집합)
        3) sorted set (set을 정렬해둔 상태)
        4) Hash
        5) List (양방향 연결리스트도 가능)

<br>

#### 문제
일부 데이터 손실에 영향을 받지 않는 경우에는 ⓐ를 사용하고, 장애 상황 직전까지의 모든 데이터가 보장되어야 할 경우에는 ⓑ를 사용한다. 결론적으로 레디스는 일반적으로 ⓐ와 ⓑ 동시에 사용하여 데이터를 백업한다.

각각 들어갈 용어는?

    1) ⓐ - AOF, ⓑ - RDB    2) ⓐ - RDB, ⓑ - AOF

<br>

##### [참고]
[레디스 알고 쓰자](<https://velog.io/@banggeunho/%EB%A0%88%EB%94%94%EC%8A%A4Redis-%EC%95%8C%EA%B3%A0-%EC%93%B0%EC%9E%90.-%EC%A0%95%EC%9D%98-%EC%A0%80%EC%9E%A5%EB%B0%A9%EC%8B%9D-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0-%EC%9C%A0%ED%9A%A8-%EA%B8%B0%EA%B0%84>)
