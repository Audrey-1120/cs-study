# 정규화 (Normalization)

> 데이터의 중복을 줄이고, 무결성을 향상시킬 수 있는 것

### 목표
테이블 간 **중복된 데이터를 허용하지 않는 것**  
중복된 데이터를 만들지 않으면, 무결성을 유지할 수 있고, DB 저장 용량 또한 효율적으로 관리할 수 있다.

### 목적
- 데이터의 중복을 없애면서 불필요한 데이터를 최소화시킨다.
- 무결성을 지키고, 이상 현상을 방지한다.
- 테이블 구성을 논리적이고 직관적으로 할 수 있다.
- 데이터베이스 구조 확장에 용이해진다.

<br>

### 제 1 정규화(1NF)

테이블 칼럼이 원자값(하나의 값)을 갖도록 테이블을 분리시키는 것

#### 조건
- 어떤 릴레이션이 속한 모든 도메인이 원자값만으로 되어 있어야한다.
- 모든 속성에 반복되는 그룹이 나타나지 않는다.
- 기본키를 사용하여 관련 데이터의 각 집합을 고유하게 식별할 수 있어야 한다.

<br>

[ 고객 테이블 ]

| 고객 ID | 이름 | 연락처 |
| --- | --- | --- |
| 123 | 김아름 | 010-1234-5678, 02-111-5678 |
| 456 | 이은아 | (010) 9876-5432, 031-2222-3333 |
| 789 | 황희진 | 010-7412-8536 |

현재 고객 테이블은 연락처를 여러 개 가지고 있어 원자값이 아님.  
따라서 1NF에 맞추기 위해서는 아래와 같이 분리할 수 있다.

| 고객 ID | 이름 | 연락처 |
| --- | --- | --- |
| 123 | 김아름 | 010-1234-5678 |
| 123 | 김아름 | 02-111-5678 |
| 456 | 이은아 | (010) 9876-5432 |
| 456 | 이은아 | 031-2222-3333 |
| 789 | 황희진 | 010-7412-8536 |

<br>

### 제 2 정규화(2NF)

테이블의 모든 칼럼이 완전 함수적 종속을 만족해야 한다.  
-> 테이블에서 기본키가 복합키(키1, 키2)로 묶여있을 때, 두 키 중 하나의 키만으로 다른 칼럼을 결정지을 수 있으면 안된다.

> 기본키의 부분집합 키가 결정자가 되어선 안된다는 것

<br>

[ 노트북 모델 테이블 ]

| <u>`제조사`</u> | <u>`모델`</u> | `세부모델명` | `제조사 소재지` |
| --- | --- | --- | --- |
| SAMSUNG | 갤럭시 북 | 갤럭시 북 Pro | Korea |
| SAMSUNG | 갤럭시 북 | 갤럭시 북 Edge | Korea |
| LG | 그램 | 그램 Pro | Korea |
| LG | 그램 | 그램 Style | Korea |
| LENOVO | lenovo | lenovo ThinkPad | China |
| LENOVO | lenovo | lenovo Yoga | China |

<br>

`제조사`와 `모델`이 키가 되어 `세부모델명`을 알 수 있다.  
`제조사 소재지`는 `제조사`로 인해 결정된다. (부분 함수 종속)  
따라서, `모델`과 `제조사 소재지`는 아무런 연관관계가 없는 상황이다.  

결국 완전 함수적 종속을 충족시키지 못하고 있는 테이블이다.  
부분 함수 종속을 해결하기 위해 테이블을 아래와 같이 나눠서 2NF를 만족할 수 있다.

<br>

[ 노트북 제조사 테이블 ]

| <u>`제조사`</u> | `제조사 소재지` |
| --- | --- |
| SAMSUNG | Korea |
| LG | Korea |
| LENOVO | China |

<br>

[ 노트북 모델 테이블 ]

| <u>`제조사`</u> | <u>`모델`</u> | `세부모델명` |
| --- | --- | --- |
| SAMSUNG | 갤럭시 북 | 갤럭시 북 Pro |
| SAMSUNG | 갤럭시 북 | 갤럭시 북 Edge |
| LG | 그램 | 그램 Pro |
| LG | 그램 | 그램 Style |
| LENOVO | lenovo | lenovo ThinkPad |
| LENOVO | lenovo | lenovo Yoga |

<br>

### 제 3 정규화(3NF)

2NF가 진행된 테이블에서 이행적 종속을 없애기 위해 테이블을 분리하는 것이다.

> 이행적 종속  
> A → B, B → C 이면 A → C 가 성립된다.

<br>

#### 2가지 조건을 만족시켜야 한다.
- 릴레이션이 2NF에 만족한다.
- 기본키가 아닌 속성들은 기본키에 의존한다.

<br>

[ 올림픽 피겨 여자 싱글 금메달리스트 테이블 ]

| <u>`개최지`</u> | <u>`개최년도`</u> | `금메달리스트` | `생년월일` |
| --- | --- | --- | --- |
| 벤쿠버 | 2010 | 김연아 | 5 September 1990 |
| 토리노 | 2006 | 아라카와 시즈카 | 29 December 1981 |
| 솔트레이크시티 | 2002 | 사라 휴즈 | 2 May 1985 |
| 나가노 | 1998 | 타라 리핀스키 | 10 June 1982 |

<br>

현재 테이블에서는 `개최지`와 `개최년도`가 기본키다.  
`금메달리스트`는 이 두 복합키를 통해 결정된다.  
하지만 `생년월일`은 기본키가 아닌 `금메달리스트`에 의해 결정(의존)되고 있다.  
따라서 이는 3NF를 위반하고 있으므로 아래와 같이 분리해야 한다.

<br>

<br>

[ 올림픽 피겨 여자 싱글 금메달리스트 테이블 ]

| <u>`개최지`</u> | <u>`개최년도`</u> | `금메달리스트` |
| --- | --- | --- |
| 벤쿠버 | 2010 | 김연아 |
| 토리노 | 2006 | 아라카와 시즈카 |
| 솔트레이크시티 | 2002 | 사라 휴즈 |
| 나가노 | 1998 | 타라 리핀스키 |

<br>

[ 올림픽 피겨 여자 싱글 금메달리스트 생년월일 테이블 ]

| <u>`금메달리스트`</u> | `생년월일` |
| --- | --- |
| 김연아 | 5 September 1990 |
| 아라카와 시즈카 | 29 December 1981 |
| 사라 휴즈 | 2 May 1985 |
| 타라 리핀스키 | 10 June 1982 |

<br>

#### 문제

    
    1)    2)    3) 

<br>

##### [참고]
[데이터베이스 정규화 개념 설명 및 예제](<https://wkdtjsgur100.github.io/database-normalization/>)
